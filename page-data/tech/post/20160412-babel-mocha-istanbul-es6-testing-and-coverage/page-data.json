{"componentChunkName":"component---node-modules-gatsby-theme-replica-src-templates-post-tsx","path":"/tech/post/20160412-babel-mocha-istanbul-es6-testing-and-coverage/","result":{"data":{"post":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"结合使用Babel Mocha Istanbul进行ES6代码测试和覆盖率测试\",\n  \"date\": \"2016-04-12T04:32:01.000Z\",\n  \"tags\": [\"ES6\", \"mocha\", \"istanbul\", \"babel\", \"测试\", \"代码覆盖率\"],\n  \"category\": \"TOOLS\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u9898\\u5916\\u8BDD\\uFF1A\\n\\u4E00\\u76F4\\u4EE5\\u4E3A mocha \\u8BFB\\u4F5C\\u201C\\u62B9\\u8336\\u201D\\u5E76\\u4E14\\u4E00\\u76F4\\u8FD9\\u4E48\\u8BFB\\u4E86\\u5F88\\u4E45\\uFF0C\\u76F4\\u5230\\u6700\\u8FD1\\u770B\\u4E86\\u4E00\\u4E2A mocha \\u7684\\u6559\\u5B66\\u89C6\\u9891\\uFF0C\\u624D\\u77E5\\u9053\\u8FD9\\u662F\\u6469\\u5361\\u5496\\u5561\\u7684\\u6469\\u5361\\u2026\\u800C\\u62B9\\u8336\\u7684\\u62B9\\u8336\\u5E94\\u8BE5\\u662F matcha\\u2026\"), mdx(\"p\", null, \"\\u5728\\u8FD8\\u6CA1\\u6709 babel \\u7684\\u65F6\\u5019\\uFF0C\\u4E00\\u5207\\u90FD\\u5F88\\u7B80\\u5355\\uFF0C\\u57FA\\u7840\\u7684\\u95EE\\u9898\\u5C31\\u5148\\u4E0D\\u8BA8\\u8BBA\\u4E86\\uFF0C\\u8FD9\\u91CC\\u4E3B\\u8981\\u8BB0\\u5F55\\u4E00\\u4E0B Babel \\u8F6C\\u7801\\u548C Istanbul \\u6D4B\\u8986\\u76D6\\u7387\\u7684\\u4E00\\u4E9B\\u5751\\u3002\"), mdx(\"h3\", null, \"\\u57FA\\u672C\\u8BBE\\u7F6E\"), mdx(\"p\", null, \"\\u901A\\u5E38\\u6211\\u4EEC\\u4F1A\\u6709\\u597D\\u51E0\\u4E2A\\u6587\\u4EF6\\u5939\\uFF0C\\u4F8B\\u5982\"), mdx(\"ul\", null, mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"src\"), \"\\u7528\\u6765\\u5B58\\u653E\\u6E90\\u6587\\u4EF6\\uFF0C\\u4E5F\\u5C31\\u662F\\u5305\\u542B es6,7 \\u7684\\u4EE3\\u7801\\uFF1B\"), mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"lib\"), \"\\u7528\\u6765\\u5B58\\u653E\\u7F16\\u8BD1\\u540E\\u7684\\u4EE3\\u7801\"), mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"test\"), \"\\u7528\\u6765\\u653E\\u6D4B\\u8BD5\\u811A\\u672C\")), mdx(\"p\", null, \"\\u5728\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"test\"), \"\\u6587\\u4EF6\\u5939\\u4E0B\\uFF0C\\u901A\\u5E38\\u6709\\u4E00\\u4E2A\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"mocha.opts\"), \"\\u6587\\u4EF6\\u7528\\u6765\\u5B58\\u653E mocha \\u7684\\u53C2\\u6570\"), mdx(\"pre\", null, mdx(\"code\", {\n    \"parentName\": \"pre\"\n  }, \"--compilers js:babel-register\\n--require babel-polyfill\\n\")), mdx(\"p\", null, \"\\u5982\\u679C\\u7528\\u5230\\u4E86\\u9700\\u8981\\u7528 babel-polyfill \\u624D\\u80FD\\u5B9E\\u73B0\\u7684\\u65B9\\u6CD5\\u5C31\\u9700\\u8981\\u52A0\\u4E0A\\u7B2C\\u4E8C\\u53E5\\uFF0C\\u522B\\u5FD8\\u4E86\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"npm install babel-polyfill --save-dev\")), mdx(\"p\", null, \"\\u751F\\u6210\\u8986\\u76D6\\u7387\\u7684\\u6D4B\\u8BD5\\u547D\\u4EE4\\uFF1A\\uFF08\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"_mocha\"), \" \\u662F\\u6709\\u4E0B\\u5212\\u7EBF\\u7684\\uFF09\", mdx(\"sup\", {\n    \"id\": \"fnref-1\",\n    \"parentName\": \"p\"\n  }, mdx(\"a\", {\n    \"href\": \"#fn-1\",\n    \"className\": \"footnote-ref\",\n    \"parentName\": \"sup\"\n  }, \"1\"))), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-bash\",\n    \"parentName\": \"pre\"\n  }, \"istanbul cover _mocha --  --opts ./test/mocha.opts\\n\")), mdx(\"h3\", null, \"\\u7F16\\u8BD1\"), mdx(\"pre\", null, mdx(\"code\", {\n    \"className\": \"language-bash\",\n    \"parentName\": \"pre\"\n  }, \"babel src/ -d lib/ --presets es2015 --source-map both\\n\")), mdx(\"p\", null, \"\\u4F7F\\u7528\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"--source-map both\"), \"\\u53C2\\u6570\\u5C06\\u4F1A\\u751F\\u6210 source map\\uFF0C\\u6709\\u4E86 source map\\uFF0Cistanbul \\u5C31\\u80FD\\u591F\\u8FFD\\u8E2A\\u5230\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"src\"), \"\\u4E0B\\u7684\\u6E90\\u4EE3\\u7801\\u7684\\u8986\\u76D6\\u7387\"), mdx(\"h3\", null, \"\\u6B63\\u786E\\u7684 require\"), mdx(\"p\", null, \"\\u5728 mocha \\u4E2D\\uFF0C\\u4E00\\u5B9A\\u8981 require \", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"src\"), \"\\u6587\\u4EF6\\u5939\\u4E0B\\u7684\\u6587\\u4EF6\\uFF0C\\u800C\\u4E0D\\u662F\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"lib\"), \"\\u6587\\u4EF6\\u5939\\u4E0B\\u7684\\u6587\\u4EF6\\u3002\\u867D\\u7136\\u4E24\\u4E2A\\u6587\\u4EF6\\u5939\\u4E0B\\u7684\\u6587\\u4EF6 mocha \\u90FD\\u80FD\\u6D4B\\uFF0C\\u4F46\\u662F\\u8986\\u76D6\\u7387\\u4F1A\\u6709\\u4E00\\u4E9B\\u95EE\\u9898\\u3002\"), mdx(\"h3\", null, \"\\u53EF\\u80FD\\u7684\\u95EE\\u9898\"), mdx(\"ul\", null, mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"\\u51FA\\u73B0\\u4EE5\\u4E0B\\u9519\\u8BEF\\u63D0\\u793A\\u65F6\\uFF0C\\u5F88\\u53EF\\u80FD\\u56E0\\u4E3A istanbul \\u7684\\u7248\\u672C\\u8FC7\\u4F4E\\uFF0C\\u4F7F\\u7528\", mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"1.0.0-alpha.2\"), \"\\u7248\\u672C\\u53EF\\u4EE5\\u6B63\\u5E38\\u8FD0\\u884C\")), mdx(\"pre\", null, mdx(\"code\", {\n    \"parentName\": \"pre\"\n  }, \"No coverage information was collected, exit without writing coverage information\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"istanbul \\u751F\\u6210\\u7684\\u8986\\u76D6\\u7387\\u6587\\u4EF6\\u91CC\\u4EE3\\u7801\\u51E0\\u4E4E\\u90FD\\u662F\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"\\u7EA2\\u8272\"), \"\\u7684\\uFF0C\\u8FD9\\u662F\\u56E0\\u4E3A\\u7F16\\u8BD1\\u65F6\\u6CA1\\u6709 \", mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"--source-map both\"), \" \\u53C2\\u6570\\uFF0C\\u8FFD\\u8E2A\\u7684\\u662F\", mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"lib\"), \"\\u6587\\u4EF6\\u5939\\u4E0B\\u7684\\u8986\\u76D6\\u7387\"), mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"istanbul \\u751F\\u6210\\u7684\\u8986\\u76D6\\u7387\\u6587\\u4EF6\\u603B\\u662F\\u663E\\u793A 100%\\uFF0C\\u5C31\\u7B97\\u6709\\u4E9B\\u5730\\u65B9\\u6CA1\\u6D4B\\uFF0C\\u4E5F\\u663E\\u793A 100%\\uFF0C\\u8FD9\\u662F\\u56E0\\u4E3A\\u5728 Mocha \\u91CC require \\u7684\\u662F\", mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"lib\"), \"\\u800C\\u975E\", mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"src\"))), mdx(\"h3\", null, \"\\u5176\\u4ED6\"), mdx(\"p\", null, \"\\u6211\\u6700\\u559C\\u6B22 mocha \\u7684\\u62A5\\u544A\\u5F62\\u5F0F\\u662F\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"-R nyan\"), \"\\uFF0C\\u4E00\\u53EA\\u53EF\\u7231\\u7684\\u55B5\\u661F\\u4EBA\\uFF0C\\u6CA1\\u6709\\u9519\\u7684\\u65F6\\u5019\\u662F\\u8FD9\\u6837\\u7684^\", \"_\", \"^\\uFF0C\\u6709\\u9519\\u7684\\u65F6\\u5019\\u662F\\u8FD9\\u6837\\u7684 O_O\\uFF0C\\u53CD\\u6B63\\u5C31\\u662F\\u840C\\u840C\\u840C\\u3002\"), mdx(\"p\", null, \"\\u7136\\u800C\\u6700\\u5B9E\\u7528\\u7684\\u62A5\\u544A\\u5F62\\u5F0F\\u53EF\\u80FD\\u662F\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"-R mochawesome\"), \"\\uFF0C\\u9700\\u8981\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"npm i mochawesome\"), \"\\u5B89\\u88C5\\u63D2\\u4EF6\\uFF0C\\u751F\\u6210\\u76F4\\u89C2\\u7684 html \\u6D4B\\u8BD5\\u62A5\\u544A\", mdx(\"sup\", {\n    \"id\": \"fnref-2\",\n    \"parentName\": \"p\"\n  }, mdx(\"a\", {\n    \"href\": \"#fn-2\",\n    \"className\": \"footnote-ref\",\n    \"parentName\": \"sup\"\n  }, \"2\"))), mdx(\"p\", null, \"\\u5E73\\u65F6\\u9047\\u5230\\u7684\\u95EE\\u9898\\u5341\\u6709\\u516B\\u4E5D\\u4E00\\u641C\\u90FD\\u80FD\\u627E\\u5230\\u962E\\u4E00\\u5CF0\\u8001\\u5E08\\u7684\\u6559\\u7A0B\\u2026\\u8FD9\\u8986\\u76D6\\u7387\\u4E5F\\u592A\\u9AD8\\u4E86\\uFF1F\\uFF01\"), mdx(\"div\", {\n    \"className\": \"footnotes\"\n  }, mdx(\"hr\", {\n    \"parentName\": \"div\"\n  }), mdx(\"ol\", {\n    \"parentName\": \"div\"\n  }, mdx(\"li\", {\n    \"id\": \"fn-1\",\n    \"parentName\": \"ol\"\n  }, mdx(\"a\", {\n    \"href\": \"http://www.ruanyifeng.com/blog/2015/06/istanbul.html\",\n    \"parentName\": \"li\"\n  }, \"http://www.ruanyifeng.com/blog/2015/06/istanbul.html\"), mdx(\"a\", {\n    \"href\": \"#fnref-1\",\n    \"className\": \"footnote-backref\",\n    \"parentName\": \"li\"\n  }, \"\\u21A9\")), mdx(\"li\", {\n    \"id\": \"fn-2\",\n    \"parentName\": \"ol\"\n  }, mdx(\"a\", {\n    \"href\": \"http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html\",\n    \"parentName\": \"li\"\n  }, \"http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html\"), mdx(\"a\", {\n    \"href\": \"#fnref-2\",\n    \"className\": \"footnote-backref\",\n    \"parentName\": \"li\"\n  }, \"\\u21A9\")))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"题外话：\n一直以为 mocha 读作“抹茶”并且一直这么读了很久，直到最近看了一个 mocha 的教学视频，才知道这是摩卡咖啡的摩卡…而抹茶的抹茶应该是 matcha… 在还没有 babel…","fields":{"slug":"/post/20160412-babel-mocha-istanbul-es6-testing-and-coverage/"},"frontmatter":{"date":"2016-04-12T04:32:01.000Z","title":"结合使用Babel Mocha Istanbul进行ES6代码测试和覆盖率测试","tags":["ES6","mocha","istanbul","babel","测试","代码覆盖率"],"category":"TOOLS"},"tableOfContents":{"items":[{"url":"#基本设置","title":"基本设置"},{"url":"#编译","title":"编译"},{"url":"#正确的-require","title":"正确的 require"},{"url":"#可能的问题","title":"可能的问题"},{"url":"#其他","title":"其他"}]},"timeToRead":1}},"pageContext":{"postID":"91c4d72a-eb1c-5c8f-be59-ddc5994c0b30","numericId":27,"prevPost":{"slug":"/post/20160401-scope-and-this-of-arrow-function/","title":"箭头函数的作用域和this"},"nextPost":{"slug":"/post/20160414-push-to-deploy-through-git-hook/","title":"如何通过Git钩子自动部署(Push to Deploy)"}}},"staticQueryHashes":["2873555300"]}