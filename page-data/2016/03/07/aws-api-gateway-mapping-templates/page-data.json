{"componentChunkName":"component---node-modules-gatsby-theme-replica-src-templates-post-tsx","path":"/2016/03/07/aws-api-gateway-mapping-templates/","result":{"data":{"post":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"AWS API Gateway Mapping Template 获取IP, header等\",\n  \"date\": \"2016-03-07T06:33:03.000Z\",\n  \"tags\": [\"AWS\", \"API Gateway\", \"lambda\", \"mapping templates\", \"header\"],\n  \"category\": \"AWS\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"API Gateway \\u6682\\u65F6\\u6CA1\\u6709\\u8BE6\\u7EC6\\u7684\\u4E2D\\u6587\\u6587\\u6863\\uFF0C\\u7FFB\\u8BD1\\u65E0\\u80FD\\u7684\\u6211\\u5B9E\\u5728\\u4E0D\\u77E5\\u9053 Mapping Template \\u5E94\\u8BE5\\u7FFB\\u8BD1\\u6210\\u4EC0\\u4E48\\u6BD4\\u8F83\\u597D\\u3002\"), mdx(\"h3\", null, \"\\u9002\\u7528\\u573A\\u666F\"), mdx(\"p\", null, \"\\u5728\\u914D\\u5408 API Gateway \\u548C Lambda \\u6765\\u642D\\u5EFA RESTful API \\u65F6\\uFF0CLambda \\u83B7\\u53D6\\u7684 payload \\u5E76\\u975E\\u901A\\u5E38\\u670D\\u52A1\\u5668\\u7AEF\\u83B7\\u53D6\\u7684\\u4E00\\u4E2A request \\u5BF9\\u8C61\\uFF0Clambda \\u83B7\\u53D6\\u5230\\u7684 payload \\u5E76\", mdx(\"strong\", {\n    \"parentName\": \"p\"\n  }, \"\\u4E0D\\u5305\\u542B request header\"), \"\\u7684\\u5185\\u5BB9\\uFF0C\\u800C\\u53EA\\u6709\", mdx(\"strong\", {\n    \"parentName\": \"p\"\n  }, \"request body\"), \"\\u7684\\u5185\\u5BB9\\u3002\"), mdx(\"p\", null, \"header \\u4E2D\\u7684\\u90E8\\u5206\\u5185\\u5BB9\\u53EF\\u4EE5\\u901A\\u8FC7 API Gateway \\u63D0\\u4F9B\\u7684\\u53D8\\u91CF\\u4ECE mapping template \\u4E2D\\u83B7\\u53D6\\u3002\\u53EF\\u4EE5\\u83B7\\u53D6\\u7684\\u5185\\u5BB9\\u5305\\u62EC IP, http \\u65B9\\u6CD5\\uFF0C\\u8DEF\\u7531\\u53C2\\u6570\\uFF0Cquery \\u7B49\\uFF0C\\u5177\\u4F53\\u53EF\\u4EE5\\u770B\\u6587\\u6863\", mdx(\"sup\", {\n    \"id\": \"fnref-1\",\n    \"parentName\": \"p\"\n  }, mdx(\"a\", {\n    \"href\": \"#fn-1\",\n    \"className\": \"footnote-ref\",\n    \"parentName\": \"sup\"\n  }, \"1\"))), mdx(\"h3\", null, \"\\u8BBE\\u7F6E\\u65B9\\u6CD5\"), mdx(\"p\", null, \"\\u6309\\u7167\\u7406\\u8BBA\\u6765\\u8BF4\\uFF0CAWS \\u8BBE\\u7F6E\\u53EF\\u4EE5\\u901A\\u8FC7\\u754C\\u9762\\u8BBE\\u7F6E\\u7684\\u90FD\\u53EF\\u4EE5\\u901A\\u8FC7\\u811A\\u672C\\u6765\\u8BBE\\u7F6E\\u3002\\u4E0B\\u9762\\u53EA\\u4ECB\\u7ECD\\u5728\\u754C\\u9762\\u4E2D\\u7684\\u8BBE\\u7F6E\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    \"parentName\": \"ol\"\n  }, \"\\u5728 API Gateway \\u754C\\u9762\\u4E2D\\u9009\\u4E2D\\u5177\\u4F53\\u7684 api \\u65B9\\u6CD5\\uFF0C\\u70B9\\u51FB\\u53F3\\u4FA7\\u7684\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"Intergration Request\")), mdx(\"li\", {\n    \"parentName\": \"ol\"\n  }, \"\\u5728\\u5E95\\u90E8\\u70B9\\u51FB\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"Mapping Templates\")), mdx(\"li\", {\n    \"parentName\": \"ol\"\n  }, \"\\u70B9\\u51FB\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"Add Mapping Template\"), \"\\uFF0C\\u8F93\\u5165\", mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"application/json\"), \"\\uFF0C\\u70B9\\u51FB \\u221A \\u8FDB\\u884C\\u786E\\u8BA4\"), mdx(\"li\", {\n    \"parentName\": \"ol\"\n  }, \"\\u5728\\u53F3\\u4FA7\\u65B0\\u51FA\\u73B0\\u7684\\u533A\\u57DF\\uFF0C\\u70B9\\u51FB\\u7F16\\u8F91\\u6309\\u94AE\\uFF08\\u94C5\\u7B14\\u56FE\\u6807\\uFF09\\uFF0C\\u8F93\\u5165\\u9700\\u8981\\u7684\\u53D8\\u91CF\\u5373\\u53EF\\uFF0C\\u4F8B\\u5982\\u8981\\u83B7\\u53D6 ip\\uFF1A\")), mdx(\"pre\", null, mdx(\"code\", {\n    \"parentName\": \"pre\"\n  }, \"{\\n  \\\"body\\\": $input.json('$'),\\n  \\\"source_ip\\\" : \\\"$context.identity.sourceIp\\\",\\n}\\n\")), mdx(\"p\", null, \"\\u5176\\u4E2D\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"$input.json('$')\"), \"\\u662F\\u8BF7\\u6C42\\u65F6\\u5BA2\\u6237\\u7AEF\\u53D1\\u6765\\u7684 body\"), mdx(\"h3\", null, \"response header \\u548C cookie\"), mdx(\"p\", null, \"\\u5728\\u914D\\u5408\\u4F7F\\u7528 lambda \\u548C API gateway \\u7684\\u65F6\\u5019\\uFF0Cheader \\u548C cookie \\u662F\\u975E\\u5E38\\u4EE4\\u4EBA\\u5934\\u75BC\\u7684\\u95EE\\u9898\\u2026\\nlambda \\u8FD4\\u56DE\\u7684\\u5185\\u5BB9\\uFF0C\\u53EA\\u662F response body\\uFF0C\\u56E0\\u6B64\\u8BBE\\u7F6E header \\u8981\\u5728 api gateway \\u4E2D\\u8FDB\\u884C\\uFF0C\\u5E76\\u4E14\\u4E5F\\u662F\\u6709\\u4E00\\u4E9B\\u9650\\u5236\\u7684\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    \"parentName\": \"ol\"\n  }, \"\\u5728 API Gateway \\u754C\\u9762\\u4E2D\\u9009\\u4E2D\\u5177\\u4F53\\u7684 api \\u65B9\\u6CD5\\uFF0C\\u70B9\\u51FB\\u53F3\\u4FA7\\u7684\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"Method Response\")), mdx(\"li\", {\n    \"parentName\": \"ol\"\n  }, \"\\u5C55\\u5F00 HTTP Status\\uFF0C\\u70B9\\u51FB\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"Add Header\"), \"\\uFF0C\\u6DFB\\u52A0\\u4E00\\u4E2A header\\u3002\", mdx(\"blockquote\", {\n    \"parentName\": \"li\"\n  }, mdx(\"p\", {\n    \"parentName\": \"blockquote\"\n  }, mdx(\"strong\", {\n    \"parentName\": \"p\"\n  }, \"\\u6CE8\\u610F\"), \"\\uFF1A\\u53EF\\u4EE5\\u6DFB\\u52A0\\u591A\\u4E2A Header\\uFF0C\\u4F46\\u8FD9\\u4E9B header \\u4E0D\\u80FD\\u540C\\u540D\\uFF0C\\u8FD9\\u4E5F\\u5C31\\u610F\\u5473\\u7740\\uFF0C\\u53EA\\u80FD\\u6709\\u4E00\\u4E2A\", mdx(\"inlineCode\", {\n    \"parentName\": \"p\"\n  }, \"Set-Cookie\"), \"\\uFF0C\\u53EA\\u80FD\\u6DFB\\u52A0\\u4E00\\u4E2A cookie\"))), mdx(\"li\", {\n    \"parentName\": \"ol\"\n  }, \"\\u5B8C\\u6210\\u4EE5\\u4E0A\\u6B65\\u9AA4\\u540E\\uFF0C\\u8FD4\\u56DE\\u7B2C\\u4E00\\u6B65\\u6240\\u5728\\u7684\\u9875\\u9762\\uFF0C\\u70B9\\u51FB\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"Integration Response\"), \"\\uFF0C\\u70B9\\u51FB\\u4E09\\u89D2\\u5C55\\u5F00\\uFF0C\\u4F1A\\u770B\\u5230\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"Header Mappings\")), mdx(\"li\", {\n    \"parentName\": \"ol\"\n  }, \"\\u5728\\u5BF9\\u5E94\\u7684\\u4F4D\\u7F6E\\u7F16\\u8F91\", mdx(\"strong\", {\n    \"parentName\": \"li\"\n  }, \"mapping value\"))), mdx(\"ul\", null, mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"\\u5982\\u679C\\u60F3\\u4F7F\\u7528 lambda \\u8FD4\\u56DE\\u7684\\u6570\\u636E\\uFF0C\\u8BBE\\u7F6E\\u4E3A\", mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"integration.response.body.KEY\")), mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, \"\\u5982\\u679C\\u4E0D\\u662F\\u4F7F\\u7528 lambda\\uFF08\\u5373\\u628A gateway \\u7528\\u4F5C\\u4EE3\\u7406\\uFF09\\uFF0C\\u800C\\u662F\\u4F7F\\u7528\\u5B9E\\u9645\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u7684 header\\uFF0C\\u8BBE\\u7F6E\\u4E3A\", mdx(\"inlineCode\", {\n    \"parentName\": \"li\"\n  }, \"integration.response.header.KEY\"))), mdx(\"ul\", null, mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, mdx(\"a\", {\n    \"href\": \"http://docs.aws.amazon.com/zh_cn/apigateway/latest/developerguide/how-to-method-settings-execution-console.html\",\n    \"parentName\": \"li\"\n  }, \"http://docs.aws.amazon.com/zh_cn/apigateway/latest/developerguide/how-to-method-settings-execution-console.html\")), mdx(\"li\", {\n    \"parentName\": \"ul\"\n  }, mdx(\"a\", {\n    \"href\": \"http://docs.aws.amazon.com/zh_cn/apigateway/latest/developerguide/request-response-data-mappings.html\",\n    \"parentName\": \"li\"\n  }, \"http://docs.aws.amazon.com/zh_cn/apigateway/latest/developerguide/request-response-data-mappings.html\"))), mdx(\"div\", {\n    \"className\": \"footnotes\"\n  }, mdx(\"hr\", {\n    \"parentName\": \"div\"\n  }), mdx(\"ol\", {\n    \"parentName\": \"div\"\n  }, mdx(\"li\", {\n    \"id\": \"fn-1\",\n    \"parentName\": \"ol\"\n  }, mdx(\"a\", {\n    \"href\": \"http://docs.aws.amazon.com/zh_cn/apigateway/latest/developerguide/api-gateway-mapping-template-reference.html\",\n    \"parentName\": \"li\"\n  }, \"http://docs.aws.amazon.com/zh_cn/apigateway/latest/developerguide/api-gateway-mapping-template-reference.html\"), mdx(\"a\", {\n    \"href\": \"#fnref-1\",\n    \"className\": \"footnote-backref\",\n    \"parentName\": \"li\"\n  }, \"\\u21A9\")))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"API Gateway 暂时没有详细的中文文档，翻译无能的我实在不知道 Mapping Template 应该翻译成什么比较好。 适用场景 在配合 API Gateway 和 Lambda…","fields":{"slug":"/2016/03/07/aws-api-gateway-mapping-templates/"},"frontmatter":{"date":"2016-03-07T06:33:03.000Z","title":"AWS API Gateway Mapping Template 获取IP, header等","tags":["AWS","API Gateway","lambda","mapping templates","header"],"category":"AWS"},"tableOfContents":{"items":[{"url":"#适用场景","title":"适用场景"},{"url":"#设置方法","title":"设置方法"},{"url":"#response-header-和-cookie","title":"response header 和 cookie"}]},"timeToRead":1}},"pageContext":{"postID":"96bdd3ae-9259-562f-9066-1120432693c9","numericId":24,"prevPost":{"slug":"/2016/02/29/set-cookie-from-server-side-and-client-side/","title":"Cookie在前端和后端的设置"},"nextPost":{"slug":"/2016/03/14/aws-ec2-ssh-access-mongodb-installation/","title":"AWS EC2 SSH访问 & mongodb 安装"},"permalink":"https://hiitea.io/tech/2016/03/07/aws-api-gateway-mapping-templates/"}},"staticQueryHashes":["2873555300","67573329","822196256"]}